ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"freertos.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.global	__aeabi_i2d
  20              		.section	.text.canopen_task,"ax",%progbits
  21              		.align	1
  22              		.global	canopen_task
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	canopen_task:
  28              	.LVL0:
  29              	.LFB170:
  30              		.file 1 "Core/Src/freertos.c"
   1:Core/Src/freertos.c **** /* USER CODE BEGIN Header */
   2:Core/Src/freertos.c **** /**
   3:Core/Src/freertos.c ****  ******************************************************************************
   4:Core/Src/freertos.c ****  * File Name          : freertos.c
   5:Core/Src/freertos.c ****  * Description        : Code for freertos applications
   6:Core/Src/freertos.c ****  ******************************************************************************
   7:Core/Src/freertos.c ****  * @attention
   8:Core/Src/freertos.c ****  *
   9:Core/Src/freertos.c ****  * Copyright (c) 2023 STMicroelectronics.
  10:Core/Src/freertos.c ****  * All rights reserved.
  11:Core/Src/freertos.c ****  *
  12:Core/Src/freertos.c ****  * This software is licensed under terms that can be found in the LICENSE file
  13:Core/Src/freertos.c ****  * in the root directory of this software component.
  14:Core/Src/freertos.c ****  * If no LICENSE file comes with this software, it is provided AS-IS.
  15:Core/Src/freertos.c ****  *
  16:Core/Src/freertos.c ****  ******************************************************************************
  17:Core/Src/freertos.c ****  */
  18:Core/Src/freertos.c **** /* USER CODE END Header */
  19:Core/Src/freertos.c **** 
  20:Core/Src/freertos.c **** /* Includes ------------------------------------------------------------------*/
  21:Core/Src/freertos.c **** #include "FreeRTOS.h"
  22:Core/Src/freertos.c **** #include "task.h"
  23:Core/Src/freertos.c **** #include "main.h"
  24:Core/Src/freertos.c **** #include "cmsis_os.h"
  25:Core/Src/freertos.c **** /* Private includes ----------------------------------------------------------*/
  26:Core/Src/freertos.c **** /* USER CODE BEGIN Includes */
  27:Core/Src/freertos.c **** #include "CO_app_STM32.h"
  28:Core/Src/freertos.c **** #include "OD.h"
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 2


  29:Core/Src/freertos.c **** #include "tim.h"
  30:Core/Src/freertos.c **** #include "comment.h"
  31:Core/Src/freertos.c **** #include "can.h"
  32:Core/Src/freertos.c **** #include "pid.h"
  33:Core/Src/freertos.c **** #include "adc.h"
  34:Core/Src/freertos.c **** #define Virtual_target_angle -20
  35:Core/Src/freertos.c **** #define portTICK_RATE_MS portTICK_PERIOD_MS
  36:Core/Src/freertos.c **** #define portTICK_PERIOD_MS ((TickType_t)1000 / configTICK_RATE_HZ)
  37:Core/Src/freertos.c **** /* USER CODE END Includes */
  38:Core/Src/freertos.c **** 
  39:Core/Src/freertos.c **** /* Private typedef -----------------------------------------------------------*/
  40:Core/Src/freertos.c **** /* USER CODE BEGIN PTD */
  41:Core/Src/freertos.c **** 
  42:Core/Src/freertos.c **** /* USER CODE END PTD */
  43:Core/Src/freertos.c **** 
  44:Core/Src/freertos.c **** /* Private define ------------------------------------------------------------*/
  45:Core/Src/freertos.c **** /* USER CODE BEGIN PD */
  46:Core/Src/freertos.c **** 
  47:Core/Src/freertos.c **** /* USER CODE END PD */
  48:Core/Src/freertos.c **** 
  49:Core/Src/freertos.c **** /* Private macro -------------------------------------------------------------*/
  50:Core/Src/freertos.c **** /* USER CODE BEGIN PM */
  51:Core/Src/freertos.c **** 
  52:Core/Src/freertos.c **** /* USER CODE END PM */
  53:Core/Src/freertos.c **** 
  54:Core/Src/freertos.c **** /* Private variables ---------------------------------------------------------*/
  55:Core/Src/freertos.c **** /* USER CODE BEGIN Variables */
  56:Core/Src/freertos.c **** 
  57:Core/Src/freertos.c **** /* USER CODE END Variables */
  58:Core/Src/freertos.c **** /* Definitions for PIDTask */
  59:Core/Src/freertos.c **** osThreadId_t PIDTaskHandle;
  60:Core/Src/freertos.c **** const osThreadAttr_t PIDTask_attributes = {
  61:Core/Src/freertos.c ****     .name = "PIDTask",
  62:Core/Src/freertos.c ****     .stack_size = 128 * 4,
  63:Core/Src/freertos.c ****     .priority = (osPriority_t)osPriorityHigh,
  64:Core/Src/freertos.c **** };
  65:Core/Src/freertos.c **** /* Definitions for canopenTask */
  66:Core/Src/freertos.c **** osThreadId_t canopenTaskHandle;
  67:Core/Src/freertos.c **** const osThreadAttr_t canopenTask_attributes = {
  68:Core/Src/freertos.c ****     .name = "canopenTask",
  69:Core/Src/freertos.c ****     .stack_size = 128 * 4,
  70:Core/Src/freertos.c ****     .priority = (osPriority_t)osPriorityRealtime,
  71:Core/Src/freertos.c **** };
  72:Core/Src/freertos.c **** 
  73:Core/Src/freertos.c **** /* Private function prototypes -----------------------------------------------*/
  74:Core/Src/freertos.c **** /* USER CODE BEGIN FunctionPrototypes */
  75:Core/Src/freertos.c **** PID_TypeDef TPID;
  76:Core/Src/freertos.c **** volatile double CCR_value = 0;
  77:Core/Src/freertos.c **** volatile double current_voltage = 0;
  78:Core/Src/freertos.c **** volatile double current_angle = 0;
  79:Core/Src/freertos.c **** volatile double db_target_angle = 0;
  80:Core/Src/freertos.c **** 
  81:Core/Src/freertos.c **** int voltage_counter = 0;
  82:Core/Src/freertos.c **** volatile double previous_voltage = 0;
  83:Core/Src/freertos.c **** volatile double previos_error = 0;
  84:Core/Src/freertos.c **** 
  85:Core/Src/freertos.c **** bool protection_lock = false;
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 3


  86:Core/Src/freertos.c **** bool PID_safe_lock = false;
  87:Core/Src/freertos.c **** 
  88:Core/Src/freertos.c **** void analyze_volatge(void);
  89:Core/Src/freertos.c **** void PID_Error_handler(void);
  90:Core/Src/freertos.c **** void CW_CCW_deect(void);
  91:Core/Src/freertos.c **** void PID_init(void);
  92:Core/Src/freertos.c **** void PID_protection(void);
  93:Core/Src/freertos.c **** double abs(double a);
  94:Core/Src/freertos.c **** /* USER CODE END FunctionPrototypes */
  95:Core/Src/freertos.c **** 
  96:Core/Src/freertos.c **** void StartPIDTask(void *argument);
  97:Core/Src/freertos.c **** void canopen_task(void *argument);
  98:Core/Src/freertos.c **** 
  99:Core/Src/freertos.c **** void MX_FREERTOS_Init(void); /* (MISRA C 2004 rule 8.1) */
 100:Core/Src/freertos.c **** 
 101:Core/Src/freertos.c **** /**
 102:Core/Src/freertos.c ****  * @brief  FreeRTOS initialization
 103:Core/Src/freertos.c ****  * @param  None
 104:Core/Src/freertos.c ****  * @retval None
 105:Core/Src/freertos.c ****  */
 106:Core/Src/freertos.c **** void MX_FREERTOS_Init(void)
 107:Core/Src/freertos.c **** {
 108:Core/Src/freertos.c ****   /* USER CODE BEGIN Init */
 109:Core/Src/freertos.c **** 
 110:Core/Src/freertos.c ****   /* USER CODE END Init */
 111:Core/Src/freertos.c **** 
 112:Core/Src/freertos.c ****   /* USER CODE BEGIN RTOS_MUTEX */
 113:Core/Src/freertos.c ****   /* add mutexes, ... */
 114:Core/Src/freertos.c ****   /* USER CODE END RTOS_MUTEX */
 115:Core/Src/freertos.c **** 
 116:Core/Src/freertos.c ****   /* USER CODE BEGIN RTOS_SEMAPHORES */
 117:Core/Src/freertos.c ****   /* add semaphores, ... */
 118:Core/Src/freertos.c ****   /* USER CODE END RTOS_SEMAPHORES */
 119:Core/Src/freertos.c **** 
 120:Core/Src/freertos.c ****   /* USER CODE BEGIN RTOS_TIMERS */
 121:Core/Src/freertos.c ****   /* start timers, add new ones, ... */
 122:Core/Src/freertos.c ****   /* USER CODE END RTOS_TIMERS */
 123:Core/Src/freertos.c **** 
 124:Core/Src/freertos.c ****   /* USER CODE BEGIN RTOS_QUEUES */
 125:Core/Src/freertos.c ****   /* add queues, ... */
 126:Core/Src/freertos.c ****   /* USER CODE END RTOS_QUEUES */
 127:Core/Src/freertos.c **** 
 128:Core/Src/freertos.c ****   /* Create the thread(s) */
 129:Core/Src/freertos.c ****   /* creation of PIDTask */
 130:Core/Src/freertos.c ****   PIDTaskHandle = osThreadNew(StartPIDTask, NULL, &PIDTask_attributes);
 131:Core/Src/freertos.c **** 
 132:Core/Src/freertos.c ****   /* creation of canopenTask */
 133:Core/Src/freertos.c ****   canopenTaskHandle = osThreadNew(canopen_task, NULL, &canopenTask_attributes);
 134:Core/Src/freertos.c **** 
 135:Core/Src/freertos.c ****   /* USER CODE BEGIN RTOS_THREADS */
 136:Core/Src/freertos.c ****   /* add threads, ... */
 137:Core/Src/freertos.c ****   /* USER CODE END RTOS_THREADS */
 138:Core/Src/freertos.c **** 
 139:Core/Src/freertos.c ****   /* USER CODE BEGIN RTOS_EVENTS */
 140:Core/Src/freertos.c ****   /* add events, ... */
 141:Core/Src/freertos.c ****   /* USER CODE END RTOS_EVENTS */
 142:Core/Src/freertos.c **** }
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 4


 143:Core/Src/freertos.c **** 
 144:Core/Src/freertos.c **** /* USER CODE BEGIN Header_StartPIDTask */
 145:Core/Src/freertos.c **** /**
 146:Core/Src/freertos.c ****  * @brief  Function implementing the PIDTask thread.
 147:Core/Src/freertos.c ****  * @param  argument: Not used
 148:Core/Src/freertos.c ****  * @retval None
 149:Core/Src/freertos.c ****  */
 150:Core/Src/freertos.c **** /* USER CODE END Header_StartPIDTask */
 151:Core/Src/freertos.c **** void StartPIDTask(void *argument)
 152:Core/Src/freertos.c **** {
 153:Core/Src/freertos.c ****   /* USER CODE BEGIN StartPIDTask */
 154:Core/Src/freertos.c ****   PID_init();
 155:Core/Src/freertos.c ****   /* Infinite loop */
 156:Core/Src/freertos.c ****   for (;;)
 157:Core/Src/freertos.c ****   {
 158:Core/Src/freertos.c ****     analyze_volatge();
 159:Core/Src/freertos.c ****     CW_CCW_deect();
 160:Core/Src/freertos.c ****     PID_Compute(&TPID);
 161:Core/Src/freertos.c ****     CCR_value = abs(CCR_value);
 162:Core/Src/freertos.c ****     PID_protection();
 163:Core/Src/freertos.c ****     if (PID_safe_lock == false)
 164:Core/Src/freertos.c ****     {
 165:Core/Src/freertos.c ****       TIM2->CCR2 = ((int)CCR_value);
 166:Core/Src/freertos.c ****     }
 167:Core/Src/freertos.c ****     else
 168:Core/Src/freertos.c ****     {
 169:Core/Src/freertos.c ****       HAL_GPIO_TogglePin(LED_GPIO_Port, LED_Pin);
 170:Core/Src/freertos.c ****     }
 171:Core/Src/freertos.c ****     osDelay(100);
 172:Core/Src/freertos.c ****   }
 173:Core/Src/freertos.c ****   /* USER CODE END StartPIDTask */
 174:Core/Src/freertos.c **** }
 175:Core/Src/freertos.c **** 
 176:Core/Src/freertos.c **** /* USER CODE BEGIN Header_canopen_task */
 177:Core/Src/freertos.c **** /**
 178:Core/Src/freertos.c ****  * @brief Function implementing the canopenTask thread.
 179:Core/Src/freertos.c ****  * @param argument: Not used
 180:Core/Src/freertos.c ****  * @retval None
 181:Core/Src/freertos.c ****  */
 182:Core/Src/freertos.c **** /* USER CODE END Header_canopen_task */
 183:Core/Src/freertos.c **** void canopen_task(void *argument)
 184:Core/Src/freertos.c **** {
  31              		.loc 1 184 1 view -0
  32              		.cfi_startproc
  33              		@ args = 0, pretend = 0, frame = 24
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35              		.loc 1 184 1 is_stmt 0 view .LVU1
  36 0000 10B5     		push	{r4, lr}
  37              	.LCFI0:
  38              		.cfi_def_cfa_offset 8
  39              		.cfi_offset 4, -8
  40              		.cfi_offset 14, -4
  41 0002 86B0     		sub	sp, sp, #24
  42              	.LCFI1:
  43              		.cfi_def_cfa_offset 32
 185:Core/Src/freertos.c ****   /* USER CODE BEGIN canopen_task */
 186:Core/Src/freertos.c ****   CANopenNodeSTM32 canOpenNodeSTM32;
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 5


  44              		.loc 1 186 3 is_stmt 1 view .LVU2
 187:Core/Src/freertos.c ****   canOpenNodeSTM32.CANHandle = &hcan;
  45              		.loc 1 187 3 view .LVU3
  46              		.loc 1 187 30 is_stmt 0 view .LVU4
  47 0004 164B     		ldr	r3, .L6
  48 0006 0293     		str	r3, [sp, #8]
 188:Core/Src/freertos.c ****   canOpenNodeSTM32.HWInitFunction = MX_CAN_Init;
  49              		.loc 1 188 3 is_stmt 1 view .LVU5
  50              		.loc 1 188 35 is_stmt 0 view .LVU6
  51 0008 164B     		ldr	r3, .L6+4
  52 000a 0393     		str	r3, [sp, #12]
 189:Core/Src/freertos.c ****   canOpenNodeSTM32.timerHandle = &htim17;
  53              		.loc 1 189 3 is_stmt 1 view .LVU7
  54              		.loc 1 189 32 is_stmt 0 view .LVU8
  55 000c 164B     		ldr	r3, .L6+8
  56 000e 0193     		str	r3, [sp, #4]
 190:Core/Src/freertos.c ****   canOpenNodeSTM32.desiredNodeID = 17;
  57              		.loc 1 190 3 is_stmt 1 view .LVU9
  58              		.loc 1 190 34 is_stmt 0 view .LVU10
  59 0010 1123     		movs	r3, #17
  60 0012 8DF80030 		strb	r3, [sp]
 191:Core/Src/freertos.c ****   canOpenNodeSTM32.baudrate = 125;
  61              		.loc 1 191 3 is_stmt 1 view .LVU11
  62              		.loc 1 191 29 is_stmt 0 view .LVU12
  63 0016 7D23     		movs	r3, #125
  64 0018 8DF80230 		strb	r3, [sp, #2]
 192:Core/Src/freertos.c ****   canopen_app_init(&canOpenNodeSTM32);
  65              		.loc 1 192 3 is_stmt 1 view .LVU13
  66 001c 6846     		mov	r0, sp
  67              	.LVL1:
  68              		.loc 1 192 3 is_stmt 0 view .LVU14
  69 001e FFF7FEFF 		bl	canopen_app_init
  70              	.LVL2:
 193:Core/Src/freertos.c ****   int16_t pre_target_angle = OD_PERSIST_COMM.x6001_target_angle;
  71              		.loc 1 193 3 is_stmt 1 view .LVU15
  72              		.loc 1 193 11 is_stmt 0 view .LVU16
  73 0022 124B     		ldr	r3, .L6+12
  74 0024 B3F9CE40 		ldrsh	r4, [r3, #206]
  75              	.LVL3:
 194:Core/Src/freertos.c ****   db_target_angle = OD_PERSIST_COMM.x6001_target_angle;
  76              		.loc 1 194 3 is_stmt 1 view .LVU17
  77              		.loc 1 194 19 is_stmt 0 view .LVU18
  78 0028 2046     		mov	r0, r4
  79 002a FFF7FEFF 		bl	__aeabi_i2d
  80              	.LVL4:
  81 002e 104B     		ldr	r3, .L6+16
  82 0030 C3E90001 		strd	r0, [r3]
  83 0034 0BE0     		b	.L3
  84              	.L5:
 195:Core/Src/freertos.c ****   /* Infinite loop */
 196:Core/Src/freertos.c ****   for (;;)
 197:Core/Src/freertos.c ****   {
 198:Core/Src/freertos.c ****     canopen_app_process();
 199:Core/Src/freertos.c ****     if (OD_PERSIST_COMM.x6000_current_angle != pre_target_angle)
 200:Core/Src/freertos.c ****     {
 201:Core/Src/freertos.c ****       pre_target_angle = OD_PERSIST_COMM.x6001_target_angle;
  85              		.loc 1 201 7 is_stmt 1 view .LVU19
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 6


  86              		.loc 1 201 24 is_stmt 0 view .LVU20
  87 0036 0D4B     		ldr	r3, .L6+12
  88 0038 B3F9CE40 		ldrsh	r4, [r3, #206]
  89              	.LVL5:
 202:Core/Src/freertos.c ****       db_target_angle = (double)OD_PERSIST_COMM.x6001_target_angle;
  90              		.loc 1 202 7 is_stmt 1 view .LVU21
  91              		.loc 1 202 25 is_stmt 0 view .LVU22
  92 003c 2046     		mov	r0, r4
  93 003e FFF7FEFF 		bl	__aeabi_i2d
  94              	.LVL6:
  95              		.loc 1 202 23 view .LVU23
  96 0042 0B4B     		ldr	r3, .L6+16
  97 0044 C3E90001 		strd	r0, [r3]
  98              	.L2:
 203:Core/Src/freertos.c ****     }
 204:Core/Src/freertos.c ****     vTaskDelay(1);
  99              		.loc 1 204 5 is_stmt 1 view .LVU24
 100 0048 0120     		movs	r0, #1
 101 004a FFF7FEFF 		bl	vTaskDelay
 102              	.LVL7:
 196:Core/Src/freertos.c ****   {
 103              		.loc 1 196 9 view .LVU25
 104              	.L3:
 196:Core/Src/freertos.c ****   {
 105              		.loc 1 196 3 view .LVU26
 198:Core/Src/freertos.c ****     if (OD_PERSIST_COMM.x6000_current_angle != pre_target_angle)
 106              		.loc 1 198 5 view .LVU27
 107 004e FFF7FEFF 		bl	canopen_app_process
 108              	.LVL8:
 199:Core/Src/freertos.c ****     {
 109              		.loc 1 199 5 view .LVU28
 199:Core/Src/freertos.c ****     {
 110              		.loc 1 199 24 is_stmt 0 view .LVU29
 111 0052 064B     		ldr	r3, .L6+12
 112 0054 B3F9CC30 		ldrsh	r3, [r3, #204]
 199:Core/Src/freertos.c ****     {
 113              		.loc 1 199 8 view .LVU30
 114 0058 A342     		cmp	r3, r4
 115 005a ECD1     		bne	.L5
 199:Core/Src/freertos.c ****     {
 116              		.loc 1 199 8 view .LVU31
 117 005c F4E7     		b	.L2
 118              	.L7:
 119 005e 00BF     		.align	2
 120              	.L6:
 121 0060 00000000 		.word	hcan
 122 0064 00000000 		.word	MX_CAN_Init
 123 0068 00000000 		.word	htim17
 124 006c 00000000 		.word	OD_PERSIST_COMM
 125 0070 00000000 		.word	.LANCHOR0
 126              		.cfi_endproc
 127              	.LFE170:
 129              		.section	.text.MX_FREERTOS_Init,"ax",%progbits
 130              		.align	1
 131              		.global	MX_FREERTOS_Init
 132              		.syntax unified
 133              		.thumb
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 7


 134              		.thumb_func
 136              	MX_FREERTOS_Init:
 137              	.LFB168:
 107:Core/Src/freertos.c ****   /* USER CODE BEGIN Init */
 138              		.loc 1 107 1 is_stmt 1 view -0
 139              		.cfi_startproc
 140              		@ args = 0, pretend = 0, frame = 0
 141              		@ frame_needed = 0, uses_anonymous_args = 0
 142 0000 08B5     		push	{r3, lr}
 143              	.LCFI2:
 144              		.cfi_def_cfa_offset 8
 145              		.cfi_offset 3, -8
 146              		.cfi_offset 14, -4
 130:Core/Src/freertos.c **** 
 147              		.loc 1 130 3 view .LVU33
 130:Core/Src/freertos.c **** 
 148              		.loc 1 130 19 is_stmt 0 view .LVU34
 149 0002 074A     		ldr	r2, .L10
 150 0004 0021     		movs	r1, #0
 151 0006 0748     		ldr	r0, .L10+4
 152 0008 FFF7FEFF 		bl	osThreadNew
 153              	.LVL9:
 130:Core/Src/freertos.c **** 
 154              		.loc 1 130 17 view .LVU35
 155 000c 064B     		ldr	r3, .L10+8
 156 000e 1860     		str	r0, [r3]
 133:Core/Src/freertos.c **** 
 157              		.loc 1 133 3 is_stmt 1 view .LVU36
 133:Core/Src/freertos.c **** 
 158              		.loc 1 133 23 is_stmt 0 view .LVU37
 159 0010 064A     		ldr	r2, .L10+12
 160 0012 0021     		movs	r1, #0
 161 0014 0648     		ldr	r0, .L10+16
 162 0016 FFF7FEFF 		bl	osThreadNew
 163              	.LVL10:
 133:Core/Src/freertos.c **** 
 164              		.loc 1 133 21 view .LVU38
 165 001a 064B     		ldr	r3, .L10+20
 166 001c 1860     		str	r0, [r3]
 142:Core/Src/freertos.c **** 
 167              		.loc 1 142 1 view .LVU39
 168 001e 08BD     		pop	{r3, pc}
 169              	.L11:
 170              		.align	2
 171              	.L10:
 172 0020 00000000 		.word	.LANCHOR1
 173 0024 00000000 		.word	StartPIDTask
 174 0028 00000000 		.word	.LANCHOR2
 175 002c 00000000 		.word	.LANCHOR3
 176 0030 00000000 		.word	canopen_task
 177 0034 00000000 		.word	.LANCHOR4
 178              		.cfi_endproc
 179              	.LFE168:
 181              		.global	__aeabi_dcmplt
 182              		.section	.text.CW_CCW_deect,"ax",%progbits
 183              		.align	1
 184              		.global	CW_CCW_deect
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 8


 185              		.syntax unified
 186              		.thumb
 187              		.thumb_func
 189              	CW_CCW_deect:
 190              	.LFB174:
 205:Core/Src/freertos.c ****   }
 206:Core/Src/freertos.c ****   /* USER CODE END canopen_task */
 207:Core/Src/freertos.c **** }
 208:Core/Src/freertos.c **** /* Private application code --------------------------------------------------*/
 209:Core/Src/freertos.c **** /* USER CODE BEGIN Application */
 210:Core/Src/freertos.c **** void analyze_volatge(void)
 211:Core/Src/freertos.c **** {
 212:Core/Src/freertos.c ****   if (voltage_counter == 0)
 213:Core/Src/freertos.c ****   {
 214:Core/Src/freertos.c ****     previous_voltage = current_voltage;
 215:Core/Src/freertos.c ****     previos_error = abs(current_angle - db_target_angle);
 216:Core/Src/freertos.c ****   }
 217:Core/Src/freertos.c ****   HAL_ADC_Start(&hadc1);
 218:Core/Src/freertos.c ****   HAL_ADC_PollForConversion(&hadc1, 1);
 219:Core/Src/freertos.c ****   current_voltage = HAL_ADC_GetValue(&hadc1);
 220:Core/Src/freertos.c ****   current_voltage = ((current_voltage / 4096) * 3.3);
 221:Core/Src/freertos.c ****   current_angle = (int)(((current_voltage * 2) - 1.6) * 26.5 - 34.45);
 222:Core/Src/freertos.c ****   if (voltage_counter == 4)
 223:Core/Src/freertos.c ****   {
 224:Core/Src/freertos.c ****     protection_lock = true;
 225:Core/Src/freertos.c ****   }
 226:Core/Src/freertos.c ****   else
 227:Core/Src/freertos.c ****   {
 228:Core/Src/freertos.c ****     protection_lock = false;
 229:Core/Src/freertos.c ****   }
 230:Core/Src/freertos.c ****   voltage_counter = (voltage_counter + 1) % 5;
 231:Core/Src/freertos.c **** }
 232:Core/Src/freertos.c **** void PID_protection(void)
 233:Core/Src/freertos.c **** {
 234:Core/Src/freertos.c ****   if (current_voltage * 2 > 4.2 || current_voltage * 2 < 1.9) // outof voltage range 4.4v~1.6v
 235:Core/Src/freertos.c ****   {
 236:Core/Src/freertos.c ****     PID_Error_handler();
 237:Core/Src/freertos.c ****   }
 238:Core/Src/freertos.c ****   if ((abs(current_voltage - previous_voltage) > 1 || abs(current_voltage - previous_voltage) < 0.0
 239:Core/Src/freertos.c ****   {
 240:Core/Src/freertos.c ****     PID_Error_handler();
 241:Core/Src/freertos.c ****   }
 242:Core/Src/freertos.c ****   if (abs((current_angle - db_target_angle) - previos_error) < 2 && abs(current_angle - db_target_a
 243:Core/Src/freertos.c ****   {
 244:Core/Src/freertos.c ****     PID_Error_handler();
 245:Core/Src/freertos.c ****   }
 246:Core/Src/freertos.c **** }
 247:Core/Src/freertos.c **** void PID_init(void)
 248:Core/Src/freertos.c **** {
 249:Core/Src/freertos.c ****   TIM2->CCR2 = 0; // CCR_value bigger the rpm will highter 0~100
 250:Core/Src/freertos.c ****   HAL_TIM_PWM_Start(&htim2, TIM_CHANNEL_2);
 251:Core/Src/freertos.c ****   HAL_GPIO_WritePin(CW_CCW_control_GPIO_Port, CW_CCW_control_Pin, 1);
 252:Core/Src/freertos.c ****   osDelay(500);
 253:Core/Src/freertos.c ****   analyze_volatge();
 254:Core/Src/freertos.c ****   db_target_angle = Virtual_target_angle;
 255:Core/Src/freertos.c ****   PID(&TPID, &current_angle, &CCR_value, &db_target_angle, 1, 0.15, 0, _PID_P_ON_E, _PID_CD_DIRECT)
 256:Core/Src/freertos.c ****   PID_SetMode(&TPID, _PID_MODE_AUTOMATIC);
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 9


 257:Core/Src/freertos.c ****   PID_SetSampleTime(&TPID, 100);
 258:Core/Src/freertos.c ****   PID_SetOutputLimits(&TPID, -70, 70);
 259:Core/Src/freertos.c **** }
 260:Core/Src/freertos.c **** void CW_CCW_deect(void)
 261:Core/Src/freertos.c **** {
 191              		.loc 1 261 1 is_stmt 1 view -0
 192              		.cfi_startproc
 193              		@ args = 0, pretend = 0, frame = 0
 194              		@ frame_needed = 0, uses_anonymous_args = 0
 195 0000 08B5     		push	{r3, lr}
 196              	.LCFI3:
 197              		.cfi_def_cfa_offset 8
 198              		.cfi_offset 3, -8
 199              		.cfi_offset 14, -4
 262:Core/Src/freertos.c ****   if (current_angle < db_target_angle)
 200              		.loc 1 262 3 view .LVU41
 201              		.loc 1 262 21 is_stmt 0 view .LVU42
 202 0002 0B4B     		ldr	r3, .L19
 203 0004 D3E90001 		ldrd	r0, [r3]
 204              		.loc 1 262 6 view .LVU43
 205 0008 0A4B     		ldr	r3, .L19+4
 206 000a D3E90023 		ldrd	r2, [r3]
 207 000e FFF7FEFF 		bl	__aeabi_dcmplt
 208              	.LVL11:
 209 0012 30B1     		cbz	r0, .L17
 263:Core/Src/freertos.c ****   {
 264:Core/Src/freertos.c ****     HAL_GPIO_WritePin(CW_CCW_control_GPIO_Port, CW_CCW_control_Pin, 0);
 210              		.loc 1 264 5 is_stmt 1 view .LVU44
 211 0014 0022     		movs	r2, #0
 212 0016 0821     		movs	r1, #8
 213 0018 4FF09040 		mov	r0, #1207959552
 214 001c FFF7FEFF 		bl	HAL_GPIO_WritePin
 215              	.LVL12:
 216              	.L12:
 265:Core/Src/freertos.c ****   }
 266:Core/Src/freertos.c ****   else
 267:Core/Src/freertos.c ****   {
 268:Core/Src/freertos.c ****     HAL_GPIO_WritePin(CW_CCW_control_GPIO_Port, CW_CCW_control_Pin, 1);
 269:Core/Src/freertos.c ****   }
 270:Core/Src/freertos.c **** }
 217              		.loc 1 270 1 is_stmt 0 view .LVU45
 218 0020 08BD     		pop	{r3, pc}
 219              	.L17:
 268:Core/Src/freertos.c ****   }
 220              		.loc 1 268 5 is_stmt 1 view .LVU46
 221 0022 0122     		movs	r2, #1
 222 0024 0821     		movs	r1, #8
 223 0026 4FF09040 		mov	r0, #1207959552
 224 002a FFF7FEFF 		bl	HAL_GPIO_WritePin
 225              	.LVL13:
 226              		.loc 1 270 1 is_stmt 0 view .LVU47
 227 002e F7E7     		b	.L12
 228              	.L20:
 229              		.align	2
 230              	.L19:
 231 0030 00000000 		.word	.LANCHOR5
 232 0034 00000000 		.word	.LANCHOR0
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 10


 233              		.cfi_endproc
 234              	.LFE174:
 236              		.section	.text.PID_Error_handler,"ax",%progbits
 237              		.align	1
 238              		.global	PID_Error_handler
 239              		.syntax unified
 240              		.thumb
 241              		.thumb_func
 243              	PID_Error_handler:
 244              	.LFB175:
 271:Core/Src/freertos.c **** void PID_Error_handler(void)
 272:Core/Src/freertos.c **** {
 245              		.loc 1 272 1 is_stmt 1 view -0
 246              		.cfi_startproc
 247              		@ args = 0, pretend = 0, frame = 0
 248              		@ frame_needed = 0, uses_anonymous_args = 0
 249              		@ link register save eliminated.
 273:Core/Src/freertos.c ****   TIM2->CCR2 = 0;
 250              		.loc 1 273 3 view .LVU49
 251              		.loc 1 273 14 is_stmt 0 view .LVU50
 252 0000 4FF08043 		mov	r3, #1073741824
 253 0004 0022     		movs	r2, #0
 254 0006 9A63     		str	r2, [r3, #56]
 274:Core/Src/freertos.c ****   PID_safe_lock = true;
 255              		.loc 1 274 3 is_stmt 1 view .LVU51
 256              		.loc 1 274 17 is_stmt 0 view .LVU52
 257 0008 014B     		ldr	r3, .L22
 258 000a 0122     		movs	r2, #1
 259 000c 1A70     		strb	r2, [r3]
 275:Core/Src/freertos.c **** }
 260              		.loc 1 275 1 view .LVU53
 261 000e 7047     		bx	lr
 262              	.L23:
 263              		.align	2
 264              	.L22:
 265 0010 00000000 		.word	.LANCHOR6
 266              		.cfi_endproc
 267              	.LFE175:
 269              		.section	.text.abs,"ax",%progbits
 270              		.align	1
 271              		.global	abs
 272              		.syntax unified
 273              		.thumb
 274              		.thumb_func
 276              	abs:
 277              	.LVL14:
 278              	.LFB176:
 276:Core/Src/freertos.c **** double abs(double a)
 277:Core/Src/freertos.c **** {
 279              		.loc 1 277 1 is_stmt 1 view -0
 280              		.cfi_startproc
 281              		@ args = 0, pretend = 0, frame = 0
 282              		@ frame_needed = 0, uses_anonymous_args = 0
 283              		.loc 1 277 1 is_stmt 0 view .LVU55
 284 0000 38B5     		push	{r3, r4, r5, lr}
 285              	.LCFI4:
 286              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 11


 287              		.cfi_offset 3, -16
 288              		.cfi_offset 4, -12
 289              		.cfi_offset 5, -8
 290              		.cfi_offset 14, -4
 291 0002 55EC104B 		vmov	r4, r5, d0
 278:Core/Src/freertos.c ****   if (a < 0)
 292              		.loc 1 278 3 is_stmt 1 view .LVU56
 293              		.loc 1 278 6 is_stmt 0 view .LVU57
 294 0006 0022     		movs	r2, #0
 295 0008 0023     		movs	r3, #0
 296 000a 10EE100A 		vmov	r0, s0	@ int
 297 000e 2946     		mov	r1, r5
 298 0010 FFF7FEFF 		bl	__aeabi_dcmplt
 299              	.LVL15:
 300              		.loc 1 278 6 view .LVU58
 301 0014 10B9     		cbnz	r0, .L29
 302              	.L25:
 279:Core/Src/freertos.c ****   {
 280:Core/Src/freertos.c ****     return (a * -1);
 281:Core/Src/freertos.c ****   }
 282:Core/Src/freertos.c ****   return a;
 283:Core/Src/freertos.c **** }
 303              		.loc 1 283 1 view .LVU59
 304 0016 45EC104B 		vmov	d0, r4, r5
 305 001a 38BD     		pop	{r3, r4, r5, pc}
 306              	.LVL16:
 307              	.L29:
 280:Core/Src/freertos.c ****   }
 308              		.loc 1 280 5 is_stmt 1 view .LVU60
 280:Core/Src/freertos.c ****   }
 309              		.loc 1 280 15 is_stmt 0 view .LVU61
 310 001c 05F10043 		add	r3, r5, #-2147483648
 311 0020 1D46     		mov	r5, r3
 312 0022 F8E7     		b	.L25
 313              		.cfi_endproc
 314              	.LFE176:
 316              		.global	__aeabi_dsub
 317              		.global	__aeabi_ui2d
 318              		.global	__aeabi_dmul
 319              		.global	__aeabi_dadd
 320              		.global	__aeabi_d2iz
 321              		.section	.text.analyze_volatge,"ax",%progbits
 322              		.align	1
 323              		.global	analyze_volatge
 324              		.syntax unified
 325              		.thumb
 326              		.thumb_func
 328              	analyze_volatge:
 329              	.LFB171:
 211:Core/Src/freertos.c ****   if (voltage_counter == 0)
 330              		.loc 1 211 1 is_stmt 1 view -0
 331              		.cfi_startproc
 332              		@ args = 0, pretend = 0, frame = 0
 333              		@ frame_needed = 0, uses_anonymous_args = 0
 334 0000 10B5     		push	{r4, lr}
 335              	.LCFI5:
 336              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 12


 337              		.cfi_offset 4, -8
 338              		.cfi_offset 14, -4
 212:Core/Src/freertos.c ****   {
 339              		.loc 1 212 3 view .LVU63
 212:Core/Src/freertos.c ****   {
 340              		.loc 1 212 23 is_stmt 0 view .LVU64
 341 0002 3B4B     		ldr	r3, .L36+24
 342 0004 1B68     		ldr	r3, [r3]
 212:Core/Src/freertos.c ****   {
 343              		.loc 1 212 6 view .LVU65
 344 0006 A3B9     		cbnz	r3, .L31
 214:Core/Src/freertos.c ****     previos_error = abs(current_angle - db_target_angle);
 345              		.loc 1 214 5 is_stmt 1 view .LVU66
 214:Core/Src/freertos.c ****     previos_error = abs(current_angle - db_target_angle);
 346              		.loc 1 214 22 is_stmt 0 view .LVU67
 347 0008 3A4B     		ldr	r3, .L36+28
 348 000a D3E90001 		ldrd	r0, [r3]
 349 000e 3A4B     		ldr	r3, .L36+32
 350 0010 C3E90001 		strd	r0, [r3]
 215:Core/Src/freertos.c ****   }
 351              		.loc 1 215 5 is_stmt 1 view .LVU68
 215:Core/Src/freertos.c ****   }
 352              		.loc 1 215 21 is_stmt 0 view .LVU69
 353 0014 394B     		ldr	r3, .L36+36
 354 0016 D3E90001 		ldrd	r0, [r3]
 355 001a 394B     		ldr	r3, .L36+40
 356 001c D3E90023 		ldrd	r2, [r3]
 357 0020 FFF7FEFF 		bl	__aeabi_dsub
 358              	.LVL17:
 359 0024 41EC100B 		vmov	d0, r0, r1
 360 0028 FFF7FEFF 		bl	abs
 361              	.LVL18:
 215:Core/Src/freertos.c ****   }
 362              		.loc 1 215 19 view .LVU70
 363 002c 354B     		ldr	r3, .L36+44
 364 002e 83ED000B 		vstr.64	d0, [r3]
 365              	.L31:
 217:Core/Src/freertos.c ****   HAL_ADC_PollForConversion(&hadc1, 1);
 366              		.loc 1 217 3 is_stmt 1 view .LVU71
 367 0032 354C     		ldr	r4, .L36+48
 368 0034 2046     		mov	r0, r4
 369 0036 FFF7FEFF 		bl	HAL_ADC_Start
 370              	.LVL19:
 218:Core/Src/freertos.c ****   current_voltage = HAL_ADC_GetValue(&hadc1);
 371              		.loc 1 218 3 view .LVU72
 372 003a 0121     		movs	r1, #1
 373 003c 2046     		mov	r0, r4
 374 003e FFF7FEFF 		bl	HAL_ADC_PollForConversion
 375              	.LVL20:
 219:Core/Src/freertos.c ****   current_voltage = ((current_voltage / 4096) * 3.3);
 376              		.loc 1 219 3 view .LVU73
 219:Core/Src/freertos.c ****   current_voltage = ((current_voltage / 4096) * 3.3);
 377              		.loc 1 219 21 is_stmt 0 view .LVU74
 378 0042 2046     		mov	r0, r4
 379 0044 FFF7FEFF 		bl	HAL_ADC_GetValue
 380              	.LVL21:
 219:Core/Src/freertos.c ****   current_voltage = ((current_voltage / 4096) * 3.3);
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 13


 381              		.loc 1 219 19 view .LVU75
 382 0048 FFF7FEFF 		bl	__aeabi_ui2d
 383              	.LVL22:
 384 004c 294C     		ldr	r4, .L36+28
 385 004e C4E90001 		strd	r0, [r4]
 220:Core/Src/freertos.c ****   current_angle = (int)(((current_voltage * 2) - 1.6) * 26.5 - 34.45);
 386              		.loc 1 220 3 is_stmt 1 view .LVU76
 220:Core/Src/freertos.c ****   current_angle = (int)(((current_voltage * 2) - 1.6) * 26.5 - 34.45);
 387              		.loc 1 220 39 is_stmt 0 view .LVU77
 388 0052 0022     		movs	r2, #0
 389 0054 2D4B     		ldr	r3, .L36+52
 390 0056 D4E90001 		ldrd	r0, [r4]
 391 005a FFF7FEFF 		bl	__aeabi_dmul
 392              	.LVL23:
 220:Core/Src/freertos.c ****   current_angle = (int)(((current_voltage * 2) - 1.6) * 26.5 - 34.45);
 393              		.loc 1 220 47 view .LVU78
 394 005e 1EA3     		adr	r3, .L36
 395 0060 D3E90023 		ldrd	r2, [r3]
 396 0064 FFF7FEFF 		bl	__aeabi_dmul
 397              	.LVL24:
 220:Core/Src/freertos.c ****   current_angle = (int)(((current_voltage * 2) - 1.6) * 26.5 - 34.45);
 398              		.loc 1 220 19 view .LVU79
 399 0068 C4E90001 		strd	r0, [r4]
 221:Core/Src/freertos.c ****   if (voltage_counter == 4)
 400              		.loc 1 221 3 is_stmt 1 view .LVU80
 221:Core/Src/freertos.c ****   if (voltage_counter == 4)
 401              		.loc 1 221 43 is_stmt 0 view .LVU81
 402 006c D4E90001 		ldrd	r0, [r4]
 403 0070 0246     		mov	r2, r0
 404 0072 0B46     		mov	r3, r1
 405 0074 FFF7FEFF 		bl	__aeabi_dadd
 406              	.LVL25:
 221:Core/Src/freertos.c ****   if (voltage_counter == 4)
 407              		.loc 1 221 48 view .LVU82
 408 0078 19A3     		adr	r3, .L36+8
 409 007a D3E90023 		ldrd	r2, [r3]
 410 007e FFF7FEFF 		bl	__aeabi_dsub
 411              	.LVL26:
 221:Core/Src/freertos.c ****   if (voltage_counter == 4)
 412              		.loc 1 221 55 view .LVU83
 413 0082 0022     		movs	r2, #0
 414 0084 224B     		ldr	r3, .L36+56
 415 0086 FFF7FEFF 		bl	__aeabi_dmul
 416              	.LVL27:
 221:Core/Src/freertos.c ****   if (voltage_counter == 4)
 417              		.loc 1 221 62 view .LVU84
 418 008a 17A3     		adr	r3, .L36+16
 419 008c D3E90023 		ldrd	r2, [r3]
 420 0090 FFF7FEFF 		bl	__aeabi_dsub
 421              	.LVL28:
 221:Core/Src/freertos.c ****   if (voltage_counter == 4)
 422              		.loc 1 221 19 view .LVU85
 423 0094 FFF7FEFF 		bl	__aeabi_d2iz
 424              	.LVL29:
 221:Core/Src/freertos.c ****   if (voltage_counter == 4)
 425              		.loc 1 221 17 view .LVU86
 426 0098 FFF7FEFF 		bl	__aeabi_i2d
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 14


 427              	.LVL30:
 428 009c 174B     		ldr	r3, .L36+36
 429 009e C3E90001 		strd	r0, [r3]
 222:Core/Src/freertos.c ****   {
 430              		.loc 1 222 3 is_stmt 1 view .LVU87
 222:Core/Src/freertos.c ****   {
 431              		.loc 1 222 23 is_stmt 0 view .LVU88
 432 00a2 134B     		ldr	r3, .L36+24
 433 00a4 1A68     		ldr	r2, [r3]
 222:Core/Src/freertos.c ****   {
 434              		.loc 1 222 6 view .LVU89
 435 00a6 042A     		cmp	r2, #4
 436 00a8 0FD0     		beq	.L35
 228:Core/Src/freertos.c ****   }
 437              		.loc 1 228 5 is_stmt 1 view .LVU90
 228:Core/Src/freertos.c ****   }
 438              		.loc 1 228 21 is_stmt 0 view .LVU91
 439 00aa 1A4B     		ldr	r3, .L36+60
 440 00ac 0021     		movs	r1, #0
 441 00ae 1970     		strb	r1, [r3]
 442              	.L33:
 230:Core/Src/freertos.c **** }
 443              		.loc 1 230 3 is_stmt 1 view .LVU92
 230:Core/Src/freertos.c **** }
 444              		.loc 1 230 38 is_stmt 0 view .LVU93
 445 00b0 0132     		adds	r2, r2, #1
 230:Core/Src/freertos.c **** }
 446              		.loc 1 230 43 view .LVU94
 447 00b2 1949     		ldr	r1, .L36+64
 448 00b4 81FB0231 		smull	r3, r1, r1, r2
 449 00b8 D317     		asrs	r3, r2, #31
 450 00ba C3EB6103 		rsb	r3, r3, r1, asr #1
 451 00be 03EB8303 		add	r3, r3, r3, lsl #2
 452 00c2 D31A     		subs	r3, r2, r3
 230:Core/Src/freertos.c **** }
 453              		.loc 1 230 19 view .LVU95
 454 00c4 0A4A     		ldr	r2, .L36+24
 455 00c6 1360     		str	r3, [r2]
 231:Core/Src/freertos.c **** void PID_protection(void)
 456              		.loc 1 231 1 view .LVU96
 457 00c8 10BD     		pop	{r4, pc}
 458              	.L35:
 224:Core/Src/freertos.c ****   }
 459              		.loc 1 224 5 is_stmt 1 view .LVU97
 224:Core/Src/freertos.c ****   }
 460              		.loc 1 224 21 is_stmt 0 view .LVU98
 461 00ca 124B     		ldr	r3, .L36+60
 462 00cc 0121     		movs	r1, #1
 463 00ce 1970     		strb	r1, [r3]
 464 00d0 EEE7     		b	.L33
 465              	.L37:
 466 00d2 00BFAFF3 		.align	3
 466      0080
 467              	.L36:
 468 00d8 66666666 		.word	1717986918
 469 00dc 66660A40 		.word	1074423398
 470 00e0 9A999999 		.word	-1717986918
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 15


 471 00e4 9999F93F 		.word	1073322393
 472 00e8 9A999999 		.word	-1717986918
 473 00ec 99394140 		.word	1078016409
 474 00f0 00000000 		.word	.LANCHOR7
 475 00f4 00000000 		.word	.LANCHOR8
 476 00f8 00000000 		.word	.LANCHOR9
 477 00fc 00000000 		.word	.LANCHOR5
 478 0100 00000000 		.word	.LANCHOR0
 479 0104 00000000 		.word	.LANCHOR10
 480 0108 00000000 		.word	hadc1
 481 010c 0000303F 		.word	1060110336
 482 0110 00803A40 		.word	1077575680
 483 0114 00000000 		.word	.LANCHOR11
 484 0118 67666666 		.word	1717986919
 485              		.cfi_endproc
 486              	.LFE171:
 488              		.section	.text.PID_init,"ax",%progbits
 489              		.align	1
 490              		.global	PID_init
 491              		.syntax unified
 492              		.thumb
 493              		.thumb_func
 495              	PID_init:
 496              	.LFB173:
 248:Core/Src/freertos.c ****   TIM2->CCR2 = 0; // CCR_value bigger the rpm will highter 0~100
 497              		.loc 1 248 1 is_stmt 1 view -0
 498              		.cfi_startproc
 499              		@ args = 0, pretend = 0, frame = 0
 500              		@ frame_needed = 0, uses_anonymous_args = 0
 501 0000 30B5     		push	{r4, r5, lr}
 502              	.LCFI6:
 503              		.cfi_def_cfa_offset 12
 504              		.cfi_offset 4, -12
 505              		.cfi_offset 5, -8
 506              		.cfi_offset 14, -4
 507 0002 83B0     		sub	sp, sp, #12
 508              	.LCFI7:
 509              		.cfi_def_cfa_offset 24
 249:Core/Src/freertos.c ****   HAL_TIM_PWM_Start(&htim2, TIM_CHANNEL_2);
 510              		.loc 1 249 3 view .LVU100
 249:Core/Src/freertos.c ****   HAL_TIM_PWM_Start(&htim2, TIM_CHANNEL_2);
 511              		.loc 1 249 14 is_stmt 0 view .LVU101
 512 0004 0025     		movs	r5, #0
 513 0006 4FF08043 		mov	r3, #1073741824
 514 000a 9D63     		str	r5, [r3, #56]
 250:Core/Src/freertos.c ****   HAL_GPIO_WritePin(CW_CCW_control_GPIO_Port, CW_CCW_control_Pin, 1);
 515              		.loc 1 250 3 is_stmt 1 view .LVU102
 516 000c 0421     		movs	r1, #4
 517 000e 2448     		ldr	r0, .L40+40
 518 0010 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 519              	.LVL31:
 251:Core/Src/freertos.c ****   osDelay(500);
 520              		.loc 1 251 3 view .LVU103
 521 0014 0122     		movs	r2, #1
 522 0016 0821     		movs	r1, #8
 523 0018 4FF09040 		mov	r0, #1207959552
 524 001c FFF7FEFF 		bl	HAL_GPIO_WritePin
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 16


 525              	.LVL32:
 252:Core/Src/freertos.c ****   analyze_volatge();
 526              		.loc 1 252 3 view .LVU104
 527 0020 4FF4FA70 		mov	r0, #500
 528 0024 FFF7FEFF 		bl	osDelay
 529              	.LVL33:
 253:Core/Src/freertos.c ****   db_target_angle = Virtual_target_angle;
 530              		.loc 1 253 3 view .LVU105
 531 0028 FFF7FEFF 		bl	analyze_volatge
 532              	.LVL34:
 254:Core/Src/freertos.c ****   PID(&TPID, &current_angle, &CCR_value, &db_target_angle, 1, 0.15, 0, _PID_P_ON_E, _PID_CD_DIRECT)
 533              		.loc 1 254 3 view .LVU106
 254:Core/Src/freertos.c ****   PID(&TPID, &current_angle, &CCR_value, &db_target_angle, 1, 0.15, 0, _PID_P_ON_E, _PID_CD_DIRECT)
 534              		.loc 1 254 19 is_stmt 0 view .LVU107
 535 002c 1D4B     		ldr	r3, .L40+44
 536 002e 0020     		movs	r0, #0
 537 0030 1D49     		ldr	r1, .L40+48
 538 0032 C3E90001 		strd	r0, [r3]
 255:Core/Src/freertos.c ****   PID_SetMode(&TPID, _PID_MODE_AUTOMATIC);
 539              		.loc 1 255 3 is_stmt 1 view .LVU108
 540 0036 1D4C     		ldr	r4, .L40+52
 541 0038 0195     		str	r5, [sp, #4]
 542 003a 0125     		movs	r5, #1
 543 003c 0095     		str	r5, [sp]
 544 003e 9FED0E2B 		vldr.64	d2, .L40
 545 0042 9FED0F1B 		vldr.64	d1, .L40+8
 546 0046 9FED100B 		vldr.64	d0, .L40+16
 547 004a 194A     		ldr	r2, .L40+56
 548 004c 1949     		ldr	r1, .L40+60
 549 004e 2046     		mov	r0, r4
 550 0050 FFF7FEFF 		bl	PID
 551              	.LVL35:
 256:Core/Src/freertos.c ****   PID_SetSampleTime(&TPID, 100);
 552              		.loc 1 256 3 view .LVU109
 553 0054 2946     		mov	r1, r5
 554 0056 2046     		mov	r0, r4
 555 0058 FFF7FEFF 		bl	PID_SetMode
 556              	.LVL36:
 257:Core/Src/freertos.c ****   PID_SetOutputLimits(&TPID, -70, 70);
 557              		.loc 1 257 3 view .LVU110
 558 005c 6421     		movs	r1, #100
 559 005e 2046     		mov	r0, r4
 560 0060 FFF7FEFF 		bl	PID_SetSampleTime
 561              	.LVL37:
 258:Core/Src/freertos.c **** }
 562              		.loc 1 258 3 view .LVU111
 563 0064 9FED0A1B 		vldr.64	d1, .L40+24
 564 0068 9FED0B0B 		vldr.64	d0, .L40+32
 565 006c 2046     		mov	r0, r4
 566 006e FFF7FEFF 		bl	PID_SetOutputLimits
 567              	.LVL38:
 259:Core/Src/freertos.c **** void CW_CCW_deect(void)
 568              		.loc 1 259 1 is_stmt 0 view .LVU112
 569 0072 03B0     		add	sp, sp, #12
 570              	.LCFI8:
 571              		.cfi_def_cfa_offset 12
 572              		@ sp needed
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 17


 573 0074 30BD     		pop	{r4, r5, pc}
 574              	.L41:
 575 0076 00BF     		.align	3
 576              	.L40:
 577 0078 00000000 		.word	0
 578 007c 00000000 		.word	0
 579 0080 33333333 		.word	858993459
 580 0084 3333C33F 		.word	1069757235
 581 0088 00000000 		.word	0
 582 008c 0000F03F 		.word	1072693248
 583 0090 00000000 		.word	0
 584 0094 00805140 		.word	1079083008
 585 0098 00000000 		.word	0
 586 009c 008051C0 		.word	-1068400640
 587 00a0 00000000 		.word	htim2
 588 00a4 00000000 		.word	.LANCHOR0
 589 00a8 000034C0 		.word	-1070333952
 590 00ac 00000000 		.word	.LANCHOR13
 591 00b0 00000000 		.word	.LANCHOR12
 592 00b4 00000000 		.word	.LANCHOR5
 593              		.cfi_endproc
 594              	.LFE173:
 596              		.global	__aeabi_dcmpgt
 597              		.global	__aeabi_dcmpeq
 598              		.section	.text.PID_protection,"ax",%progbits
 599              		.align	1
 600              		.global	PID_protection
 601              		.syntax unified
 602              		.thumb
 603              		.thumb_func
 605              	PID_protection:
 606              	.LFB172:
 233:Core/Src/freertos.c ****   if (current_voltage * 2 > 4.2 || current_voltage * 2 < 1.9) // outof voltage range 4.4v~1.6v
 607              		.loc 1 233 1 is_stmt 1 view -0
 608              		.cfi_startproc
 609              		@ args = 0, pretend = 0, frame = 0
 610              		@ frame_needed = 0, uses_anonymous_args = 0
 611 0000 08B5     		push	{r3, lr}
 612              	.LCFI9:
 613              		.cfi_def_cfa_offset 8
 614              		.cfi_offset 3, -8
 615              		.cfi_offset 14, -4
 234:Core/Src/freertos.c ****   {
 616              		.loc 1 234 3 view .LVU114
 234:Core/Src/freertos.c ****   {
 617              		.loc 1 234 23 is_stmt 0 view .LVU115
 618 0002 574B     		ldr	r3, .L63+24
 619 0004 D3E90001 		ldrd	r0, [r3]
 620 0008 0246     		mov	r2, r0
 621 000a 0B46     		mov	r3, r1
 622 000c FFF7FEFF 		bl	__aeabi_dadd
 623              	.LVL39:
 234:Core/Src/freertos.c ****   {
 624              		.loc 1 234 6 view .LVU116
 625 0010 4DA3     		adr	r3, .L63
 626 0012 D3E90023 		ldrd	r2, [r3]
 627 0016 FFF7FEFF 		bl	__aeabi_dcmpgt
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 18


 628              	.LVL40:
 629 001a 60B9     		cbnz	r0, .L43
 234:Core/Src/freertos.c ****   {
 630              		.loc 1 234 52 discriminator 1 view .LVU117
 631 001c 504B     		ldr	r3, .L63+24
 632 001e D3E90001 		ldrd	r0, [r3]
 633 0022 0246     		mov	r2, r0
 634 0024 0B46     		mov	r3, r1
 635 0026 FFF7FEFF 		bl	__aeabi_dadd
 636              	.LVL41:
 234:Core/Src/freertos.c ****   {
 637              		.loc 1 234 33 discriminator 1 view .LVU118
 638 002a 49A3     		adr	r3, .L63+8
 639 002c D3E90023 		ldrd	r2, [r3]
 640 0030 FFF7FEFF 		bl	__aeabi_dcmplt
 641              	.LVL42:
 642 0034 08B1     		cbz	r0, .L44
 643              	.L43:
 236:Core/Src/freertos.c ****   }
 644              		.loc 1 236 5 is_stmt 1 view .LVU119
 645 0036 FFF7FEFF 		bl	PID_Error_handler
 646              	.LVL43:
 647              	.L44:
 238:Core/Src/freertos.c ****   {
 648              		.loc 1 238 3 view .LVU120
 238:Core/Src/freertos.c ****   {
 649              		.loc 1 238 8 is_stmt 0 view .LVU121
 650 003a 494B     		ldr	r3, .L63+24
 651 003c D3E90001 		ldrd	r0, [r3]
 652 0040 484B     		ldr	r3, .L63+28
 653 0042 D3E90023 		ldrd	r2, [r3]
 654 0046 FFF7FEFF 		bl	__aeabi_dsub
 655              	.LVL44:
 656 004a 41EC100B 		vmov	d0, r0, r1
 657 004e FFF7FEFF 		bl	abs
 658              	.LVL45:
 659 0052 51EC100B 		vmov	r0, r1, d0
 238:Core/Src/freertos.c ****   {
 660              		.loc 1 238 6 view .LVU122
 661 0056 0022     		movs	r2, #0
 662 0058 434B     		ldr	r3, .L63+32
 663 005a FFF7FEFF 		bl	__aeabi_dcmpgt
 664              	.LVL46:
 665 005e 00B3     		cbz	r0, .L61
 666              	.L46:
 238:Core/Src/freertos.c ****   {
 667              		.loc 1 238 106 discriminator 3 view .LVU123
 668 0060 424B     		ldr	r3, .L63+36
 669 0062 D3E90001 		ldrd	r0, [r3]
 670 0066 424B     		ldr	r3, .L63+40
 671 0068 D3E90023 		ldrd	r2, [r3]
 672 006c FFF7FEFF 		bl	__aeabi_dsub
 673              	.LVL47:
 674 0070 41EC100B 		vmov	d0, r0, r1
 675 0074 FFF7FEFF 		bl	abs
 676              	.LVL48:
 677 0078 51EC100B 		vmov	r0, r1, d0
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 19


 238:Core/Src/freertos.c ****   {
 678              		.loc 1 238 103 discriminator 3 view .LVU124
 679 007c 0022     		movs	r2, #0
 680 007e 3D4B     		ldr	r3, .L63+44
 681 0080 FFF7FEFF 		bl	__aeabi_dcmpgt
 682              	.LVL49:
 683 0084 10B3     		cbz	r0, .L47
 238:Core/Src/freertos.c ****   {
 684              		.loc 1 238 147 discriminator 4 view .LVU125
 685 0086 0022     		movs	r2, #0
 686 0088 0023     		movs	r3, #0
 687 008a 3649     		ldr	r1, .L63+28
 688 008c D1E90001 		ldrd	r0, [r1]
 689 0090 FFF7FEFF 		bl	__aeabi_dcmpeq
 690              	.LVL50:
 691 0094 D0B9     		cbnz	r0, .L47
 238:Core/Src/freertos.c ****   {
 692              		.loc 1 238 172 discriminator 5 view .LVU126
 693 0096 384B     		ldr	r3, .L63+48
 694 0098 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 695 009a BBB1     		cbz	r3, .L47
 240:Core/Src/freertos.c ****   }
 696              		.loc 1 240 5 is_stmt 1 view .LVU127
 697 009c FFF7FEFF 		bl	PID_Error_handler
 698              	.LVL51:
 699 00a0 14E0     		b	.L47
 700              	.L61:
 238:Core/Src/freertos.c ****   {
 701              		.loc 1 238 55 is_stmt 0 discriminator 2 view .LVU128
 702 00a2 2F4B     		ldr	r3, .L63+24
 703 00a4 D3E90001 		ldrd	r0, [r3]
 704 00a8 2E4B     		ldr	r3, .L63+28
 705 00aa D3E90023 		ldrd	r2, [r3]
 706 00ae FFF7FEFF 		bl	__aeabi_dsub
 707              	.LVL52:
 708 00b2 41EC100B 		vmov	d0, r0, r1
 709 00b6 FFF7FEFF 		bl	abs
 710              	.LVL53:
 711 00ba 51EC100B 		vmov	r0, r1, d0
 238:Core/Src/freertos.c ****   {
 712              		.loc 1 238 52 discriminator 2 view .LVU129
 713 00be 26A3     		adr	r3, .L63+16
 714 00c0 D3E90023 		ldrd	r2, [r3]
 715 00c4 FFF7FEFF 		bl	__aeabi_dcmplt
 716              	.LVL54:
 717 00c8 0028     		cmp	r0, #0
 718 00ca C9D1     		bne	.L46
 719              	.L47:
 242:Core/Src/freertos.c ****   {
 720              		.loc 1 242 3 is_stmt 1 view .LVU130
 242:Core/Src/freertos.c ****   {
 721              		.loc 1 242 26 is_stmt 0 view .LVU131
 722 00cc 274B     		ldr	r3, .L63+36
 723 00ce D3E90001 		ldrd	r0, [r3]
 724 00d2 274B     		ldr	r3, .L63+40
 725 00d4 D3E90023 		ldrd	r2, [r3]
 726 00d8 FFF7FEFF 		bl	__aeabi_dsub
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 20


 727              	.LVL55:
 242:Core/Src/freertos.c ****   {
 728              		.loc 1 242 7 view .LVU132
 729 00dc 274B     		ldr	r3, .L63+52
 730 00de D3E90023 		ldrd	r2, [r3]
 731 00e2 FFF7FEFF 		bl	__aeabi_dsub
 732              	.LVL56:
 733 00e6 41EC100B 		vmov	d0, r0, r1
 734 00ea FFF7FEFF 		bl	abs
 735              	.LVL57:
 736 00ee 51EC100B 		vmov	r0, r1, d0
 242:Core/Src/freertos.c ****   {
 737              		.loc 1 242 6 view .LVU133
 738 00f2 0022     		movs	r2, #0
 739 00f4 4FF08043 		mov	r3, #1073741824
 740 00f8 FFF7FEFF 		bl	__aeabi_dcmplt
 741              	.LVL58:
 742 00fc E8B1     		cbz	r0, .L42
 242:Core/Src/freertos.c ****   {
 743              		.loc 1 242 69 discriminator 1 view .LVU134
 744 00fe 1B4B     		ldr	r3, .L63+36
 745 0100 D3E90001 		ldrd	r0, [r3]
 746 0104 1A4B     		ldr	r3, .L63+40
 747 0106 D3E90023 		ldrd	r2, [r3]
 748 010a FFF7FEFF 		bl	__aeabi_dsub
 749              	.LVL59:
 750 010e 41EC100B 		vmov	d0, r0, r1
 751 0112 FFF7FEFF 		bl	abs
 752              	.LVL60:
 753 0116 51EC100B 		vmov	r0, r1, d0
 242:Core/Src/freertos.c ****   {
 754              		.loc 1 242 66 discriminator 1 view .LVU135
 755 011a 0022     		movs	r2, #0
 756 011c 154B     		ldr	r3, .L63+44
 757 011e FFF7FEFF 		bl	__aeabi_dcmpgt
 758              	.LVL61:
 759 0122 50B1     		cbz	r0, .L42
 242:Core/Src/freertos.c ****   {
 760              		.loc 1 242 110 discriminator 2 view .LVU136
 761 0124 0022     		movs	r2, #0
 762 0126 0023     		movs	r3, #0
 763 0128 1449     		ldr	r1, .L63+52
 764 012a D1E90001 		ldrd	r0, [r1]
 765 012e FFF7FEFF 		bl	__aeabi_dcmpeq
 766              	.LVL62:
 767 0132 10B9     		cbnz	r0, .L42
 242:Core/Src/freertos.c ****   {
 768              		.loc 1 242 132 discriminator 3 view .LVU137
 769 0134 104B     		ldr	r3, .L63+48
 770 0136 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 771 0138 03B9     		cbnz	r3, .L62
 772              	.L42:
 246:Core/Src/freertos.c **** void PID_init(void)
 773              		.loc 1 246 1 view .LVU138
 774 013a 08BD     		pop	{r3, pc}
 775              	.L62:
 244:Core/Src/freertos.c ****   }
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 21


 776              		.loc 1 244 5 is_stmt 1 view .LVU139
 777 013c FFF7FEFF 		bl	PID_Error_handler
 778              	.LVL63:
 246:Core/Src/freertos.c **** void PID_init(void)
 779              		.loc 1 246 1 is_stmt 0 view .LVU140
 780 0140 FBE7     		b	.L42
 781              	.L64:
 782 0142 00BFAFF3 		.align	3
 782      0080
 783              	.L63:
 784 0148 CDCCCCCC 		.word	-858993459
 785 014c CCCC1040 		.word	1074842828
 786 0150 66666666 		.word	1717986918
 787 0154 6666FE3F 		.word	1073636966
 788 0158 B81E85EB 		.word	-343597384
 789 015c 51B89E3F 		.word	1067366481
 790 0160 00000000 		.word	.LANCHOR8
 791 0164 00000000 		.word	.LANCHOR9
 792 0168 0000F03F 		.word	1072693248
 793 016c 00000000 		.word	.LANCHOR5
 794 0170 00000000 		.word	.LANCHOR0
 795 0174 00001440 		.word	1075052544
 796 0178 00000000 		.word	.LANCHOR11
 797 017c 00000000 		.word	.LANCHOR10
 798              		.cfi_endproc
 799              	.LFE172:
 801              		.section	.text.StartPIDTask,"ax",%progbits
 802              		.align	1
 803              		.global	StartPIDTask
 804              		.syntax unified
 805              		.thumb
 806              		.thumb_func
 808              	StartPIDTask:
 809              	.LVL64:
 810              	.LFB169:
 152:Core/Src/freertos.c ****   /* USER CODE BEGIN StartPIDTask */
 811              		.loc 1 152 1 is_stmt 1 view -0
 812              		.cfi_startproc
 813              		@ Volatile: function does not return.
 814              		@ args = 0, pretend = 0, frame = 0
 815              		@ frame_needed = 0, uses_anonymous_args = 0
 152:Core/Src/freertos.c ****   /* USER CODE BEGIN StartPIDTask */
 816              		.loc 1 152 1 is_stmt 0 view .LVU142
 817 0000 08B5     		push	{r3, lr}
 818              	.LCFI10:
 819              		.cfi_def_cfa_offset 8
 820              		.cfi_offset 3, -8
 821              		.cfi_offset 14, -4
 154:Core/Src/freertos.c ****   /* Infinite loop */
 822              		.loc 1 154 3 is_stmt 1 view .LVU143
 823 0002 FFF7FEFF 		bl	PID_init
 824              	.LVL65:
 154:Core/Src/freertos.c ****   /* Infinite loop */
 825              		.loc 1 154 3 is_stmt 0 view .LVU144
 826 0006 09E0     		b	.L68
 827              	.L70:
 165:Core/Src/freertos.c ****     }
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 22


 828              		.loc 1 165 7 is_stmt 1 view .LVU145
 165:Core/Src/freertos.c ****     }
 829              		.loc 1 165 21 is_stmt 0 view .LVU146
 830 0008 D4E90001 		ldrd	r0, [r4]
 831 000c FFF7FEFF 		bl	__aeabi_d2iz
 832              	.LVL66:
 165:Core/Src/freertos.c ****     }
 833              		.loc 1 165 18 view .LVU147
 834 0010 4FF08043 		mov	r3, #1073741824
 835 0014 9863     		str	r0, [r3, #56]
 836              	.L67:
 171:Core/Src/freertos.c ****   }
 837              		.loc 1 171 5 is_stmt 1 view .LVU148
 838 0016 6420     		movs	r0, #100
 839 0018 FFF7FEFF 		bl	osDelay
 840              	.LVL67:
 156:Core/Src/freertos.c ****   {
 841              		.loc 1 156 9 view .LVU149
 842              	.L68:
 156:Core/Src/freertos.c ****   {
 843              		.loc 1 156 3 view .LVU150
 158:Core/Src/freertos.c ****     CW_CCW_deect();
 844              		.loc 1 158 5 view .LVU151
 845 001c FFF7FEFF 		bl	analyze_volatge
 846              	.LVL68:
 159:Core/Src/freertos.c ****     PID_Compute(&TPID);
 847              		.loc 1 159 5 view .LVU152
 848 0020 FFF7FEFF 		bl	CW_CCW_deect
 849              	.LVL69:
 160:Core/Src/freertos.c ****     CCR_value = abs(CCR_value);
 850              		.loc 1 160 5 view .LVU153
 851 0024 0A48     		ldr	r0, .L71
 852 0026 FFF7FEFF 		bl	PID_Compute
 853              	.LVL70:
 161:Core/Src/freertos.c ****     PID_protection();
 854              		.loc 1 161 5 view .LVU154
 161:Core/Src/freertos.c ****     PID_protection();
 855              		.loc 1 161 17 is_stmt 0 view .LVU155
 856 002a 0A4C     		ldr	r4, .L71+4
 857 002c 94ED000B 		vldr.64	d0, [r4]
 858 0030 FFF7FEFF 		bl	abs
 859              	.LVL71:
 161:Core/Src/freertos.c ****     PID_protection();
 860              		.loc 1 161 15 view .LVU156
 861 0034 84ED000B 		vstr.64	d0, [r4]
 162:Core/Src/freertos.c ****     if (PID_safe_lock == false)
 862              		.loc 1 162 5 is_stmt 1 view .LVU157
 863 0038 FFF7FEFF 		bl	PID_protection
 864              	.LVL72:
 163:Core/Src/freertos.c ****     {
 865              		.loc 1 163 5 view .LVU158
 163:Core/Src/freertos.c ****     {
 866              		.loc 1 163 23 is_stmt 0 view .LVU159
 867 003c 064B     		ldr	r3, .L71+8
 868 003e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 163:Core/Src/freertos.c ****     {
 869              		.loc 1 163 8 view .LVU160
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 23


 870 0040 002B     		cmp	r3, #0
 871 0042 E1D0     		beq	.L70
 169:Core/Src/freertos.c ****     }
 872              		.loc 1 169 7 is_stmt 1 view .LVU161
 873 0044 0821     		movs	r1, #8
 874 0046 0548     		ldr	r0, .L71+12
 875 0048 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 876              	.LVL73:
 877 004c E3E7     		b	.L67
 878              	.L72:
 879 004e 00BF     		.align	2
 880              	.L71:
 881 0050 00000000 		.word	.LANCHOR13
 882 0054 00000000 		.word	.LANCHOR12
 883 0058 00000000 		.word	.LANCHOR6
 884 005c 00040048 		.word	1207960576
 885              		.cfi_endproc
 886              	.LFE169:
 888              		.global	PID_safe_lock
 889              		.global	protection_lock
 890              		.global	previos_error
 891              		.global	previous_voltage
 892              		.global	voltage_counter
 893              		.global	db_target_angle
 894              		.global	current_angle
 895              		.global	current_voltage
 896              		.global	CCR_value
 897              		.global	TPID
 898              		.global	canopenTask_attributes
 899              		.section	.rodata.str1.4,"aMS",%progbits,1
 900              		.align	2
 901              	.LC0:
 902 0000 63616E6F 		.ascii	"canopenTask\000"
 902      70656E54 
 902      61736B00 
 903              		.global	canopenTaskHandle
 904              		.global	PIDTask_attributes
 905              		.align	2
 906              	.LC1:
 907 000c 50494454 		.ascii	"PIDTask\000"
 907      61736B00 
 908              		.global	PIDTaskHandle
 909              		.section	.bss.CCR_value,"aw",%nobits
 910              		.align	3
 911              		.set	.LANCHOR12,. + 0
 914              	CCR_value:
 915 0000 00000000 		.space	8
 915      00000000 
 916              		.section	.bss.PIDTaskHandle,"aw",%nobits
 917              		.align	2
 918              		.set	.LANCHOR2,. + 0
 921              	PIDTaskHandle:
 922 0000 00000000 		.space	4
 923              		.section	.bss.PID_safe_lock,"aw",%nobits
 924              		.set	.LANCHOR6,. + 0
 927              	PID_safe_lock:
 928 0000 00       		.space	1
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 24


 929              		.section	.bss.TPID,"aw",%nobits
 930              		.align	3
 931              		.set	.LANCHOR13,. + 0
 934              	TPID:
 935 0000 00000000 		.space	112
 935      00000000 
 935      00000000 
 935      00000000 
 935      00000000 
 936              		.section	.bss.canopenTaskHandle,"aw",%nobits
 937              		.align	2
 938              		.set	.LANCHOR4,. + 0
 941              	canopenTaskHandle:
 942 0000 00000000 		.space	4
 943              		.section	.bss.current_angle,"aw",%nobits
 944              		.align	3
 945              		.set	.LANCHOR5,. + 0
 948              	current_angle:
 949 0000 00000000 		.space	8
 949      00000000 
 950              		.section	.bss.current_voltage,"aw",%nobits
 951              		.align	3
 952              		.set	.LANCHOR8,. + 0
 955              	current_voltage:
 956 0000 00000000 		.space	8
 956      00000000 
 957              		.section	.bss.db_target_angle,"aw",%nobits
 958              		.align	3
 959              		.set	.LANCHOR0,. + 0
 962              	db_target_angle:
 963 0000 00000000 		.space	8
 963      00000000 
 964              		.section	.bss.previos_error,"aw",%nobits
 965              		.align	3
 966              		.set	.LANCHOR10,. + 0
 969              	previos_error:
 970 0000 00000000 		.space	8
 970      00000000 
 971              		.section	.bss.previous_voltage,"aw",%nobits
 972              		.align	3
 973              		.set	.LANCHOR9,. + 0
 976              	previous_voltage:
 977 0000 00000000 		.space	8
 977      00000000 
 978              		.section	.bss.protection_lock,"aw",%nobits
 979              		.set	.LANCHOR11,. + 0
 982              	protection_lock:
 983 0000 00       		.space	1
 984              		.section	.bss.voltage_counter,"aw",%nobits
 985              		.align	2
 986              		.set	.LANCHOR7,. + 0
 989              	voltage_counter:
 990 0000 00000000 		.space	4
 991              		.section	.rodata.PIDTask_attributes,"a"
 992              		.align	2
 993              		.set	.LANCHOR1,. + 0
 996              	PIDTask_attributes:
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 25


 997 0000 0C000000 		.word	.LC1
 998 0004 00000000 		.space	16
 998      00000000 
 998      00000000 
 998      00000000 
 999 0014 00020000 		.word	512
 1000 0018 28000000 		.word	40
 1001 001c 00000000 		.space	8
 1001      00000000 
 1002              		.section	.rodata.canopenTask_attributes,"a"
 1003              		.align	2
 1004              		.set	.LANCHOR3,. + 0
 1007              	canopenTask_attributes:
 1008 0000 00000000 		.word	.LC0
 1009 0004 00000000 		.space	16
 1009      00000000 
 1009      00000000 
 1009      00000000 
 1010 0014 00020000 		.word	512
 1011 0018 30000000 		.word	48
 1012 001c 00000000 		.space	8
 1012      00000000 
 1013              		.text
 1014              	.Letext0:
 1015              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1016              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1017              		.file 4 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1018              		.file 5 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/stm32f303x8.h"
 1019              		.file 6 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/stm32f3xx.h"
 1020              		.file 7 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_def.h"
 1021              		.file 8 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_dma.h"
 1022              		.file 9 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_adc_ex.h"
 1023              		.file 10 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_adc.h"
 1024              		.file 11 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_can.h"
 1025              		.file 12 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_tim.h"
 1026              		.file 13 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 1027              		.file 14 "Middlewares/Third_Party/CANopenNode_STM32/CO_driver_target.h"
 1028              		.file 15 "Middlewares/Third_Party/CANopenNode/301/CO_ODinterface.h"
 1029              		.file 16 "Middlewares/Third_Party/CANopenNode/301/CO_Emergency.h"
 1030              		.file 17 "Middlewares/Third_Party/CANopenNode/301/CO_NMT_Heartbeat.h"
 1031              		.file 18 "Middlewares/Third_Party/CANopenNode/301/CO_HBconsumer.h"
 1032              		.file 19 "Middlewares/Third_Party/CANopenNode/301/CO_SDOserver.h"
 1033              		.file 20 "Middlewares/Third_Party/CANopenNode/301/CO_SYNC.h"
 1034              		.file 21 "Middlewares/Third_Party/CANopenNode/301/CO_PDO.h"
 1035              		.file 22 "Middlewares/Third_Party/CANopenNode/301/CO_TIME.h"
 1036              		.file 23 "Middlewares/Third_Party/CANopenNode/303/CO_LEDs.h"
 1037              		.file 24 "Middlewares/Third_Party/CANopenNode/305/CO_LSS.h"
 1038              		.file 25 "Middlewares/Third_Party/CANopenNode/305/CO_LSSslave.h"
 1039              		.file 26 "Middlewares/Third_Party/CANopenNode/CANopen.h"
 1040              		.file 27 "Middlewares/Third_Party/CANopenNode_STM32/CO_app_STM32.h"
 1041              		.file 28 "Middlewares/Third_Party/CANopenNode_STM32/OD.h"
 1042              		.file 29 "Core/Inc/tim.h"
 1043              		.file 30 "Core/Inc/can.h"
 1044              		.file 31 "Core/Inc/pid.h"
 1045              		.file 32 "Core/Inc/adc.h"
 1046              		.file 33 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_gpio.h"
 1047              		.file 34 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 26


ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 27


DEFINED SYMBOLS
                            *ABS*:00000000 freertos.c
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:21     .text.canopen_task:00000000 $t
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:27     .text.canopen_task:00000000 canopen_task
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:121    .text.canopen_task:00000060 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:130    .text.MX_FREERTOS_Init:00000000 $t
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:136    .text.MX_FREERTOS_Init:00000000 MX_FREERTOS_Init
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:172    .text.MX_FREERTOS_Init:00000020 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:808    .text.StartPIDTask:00000000 StartPIDTask
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:183    .text.CW_CCW_deect:00000000 $t
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:189    .text.CW_CCW_deect:00000000 CW_CCW_deect
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:231    .text.CW_CCW_deect:00000030 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:237    .text.PID_Error_handler:00000000 $t
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:243    .text.PID_Error_handler:00000000 PID_Error_handler
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:265    .text.PID_Error_handler:00000010 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:270    .text.abs:00000000 $t
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:276    .text.abs:00000000 abs
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:322    .text.analyze_volatge:00000000 $t
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:328    .text.analyze_volatge:00000000 analyze_volatge
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:468    .text.analyze_volatge:000000d8 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:489    .text.PID_init:00000000 $t
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:495    .text.PID_init:00000000 PID_init
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:577    .text.PID_init:00000078 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:599    .text.PID_protection:00000000 $t
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:605    .text.PID_protection:00000000 PID_protection
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:784    .text.PID_protection:00000148 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:802    .text.StartPIDTask:00000000 $t
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:881    .text.StartPIDTask:00000050 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:927    .bss.PID_safe_lock:00000000 PID_safe_lock
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:982    .bss.protection_lock:00000000 protection_lock
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:969    .bss.previos_error:00000000 previos_error
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:976    .bss.previous_voltage:00000000 previous_voltage
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:989    .bss.voltage_counter:00000000 voltage_counter
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:962    .bss.db_target_angle:00000000 db_target_angle
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:948    .bss.current_angle:00000000 current_angle
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:955    .bss.current_voltage:00000000 current_voltage
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:914    .bss.CCR_value:00000000 CCR_value
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:934    .bss.TPID:00000000 TPID
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:1007   .rodata.canopenTask_attributes:00000000 canopenTask_attributes
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:900    .rodata.str1.4:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:941    .bss.canopenTaskHandle:00000000 canopenTaskHandle
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:996    .rodata.PIDTask_attributes:00000000 PIDTask_attributes
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:921    .bss.PIDTaskHandle:00000000 PIDTaskHandle
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:910    .bss.CCR_value:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:917    .bss.PIDTaskHandle:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:928    .bss.PID_safe_lock:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:930    .bss.TPID:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:937    .bss.canopenTaskHandle:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:944    .bss.current_angle:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:951    .bss.current_voltage:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:958    .bss.db_target_angle:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:965    .bss.previos_error:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:972    .bss.previous_voltage:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:983    .bss.protection_lock:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:985    .bss.voltage_counter:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:992    .rodata.PIDTask_attributes:00000000 $d
C:\Users\walker\AppData\Local\Temp\ccR84abd.s:1003   .rodata.canopenTask_attributes:00000000 $d
ARM GAS  C:\Users\walker\AppData\Local\Temp\ccR84abd.s 			page 28



UNDEFINED SYMBOLS
__aeabi_i2d
canopen_app_init
vTaskDelay
canopen_app_process
hcan
MX_CAN_Init
htim17
OD_PERSIST_COMM
osThreadNew
__aeabi_dcmplt
HAL_GPIO_WritePin
__aeabi_dsub
__aeabi_ui2d
__aeabi_dmul
__aeabi_dadd
__aeabi_d2iz
HAL_ADC_Start
HAL_ADC_PollForConversion
HAL_ADC_GetValue
hadc1
HAL_TIM_PWM_Start
osDelay
PID
PID_SetMode
PID_SetSampleTime
PID_SetOutputLimits
htim2
__aeabi_dcmpgt
__aeabi_dcmpeq
PID_Compute
HAL_GPIO_TogglePin
